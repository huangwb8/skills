# 优化计划: [项目名称] v[版本号]

**计划时间**: {{PLAN_DATE}}
**计划人员**: {{PLANNER}}
**测试会话**: v{{SESSION_ID}}

---

## 计划概述

### 迭代目标
- 本次迭代的主要目标
- 预期达成的成果
- 质量改进目标

### 预期成果
- 修复问题数: {{EXPECTED_FIXES}}
- 测试通过率目标: {{PASS_RATE_TARGET}}%
- 覆盖率提升: {{COVERAGE_IMPROVEMENT}}%

### 时间估算
- **总预计工作量**: {{TOTAL_EFFORT}} 小时
- **开发时间**: {{DEV_TIME}} 小时
- **测试时间**: {{TEST_TIME}} 小时
- **文档更新**: {{DOC_TIME}} 小时

### 风险评估
| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|----------|
| ... | 高/中/低 | 高/中/低 | ... |

---

## 迭代范围

### 本次迭代修复的问题

#### P0 问题(Critical)
- [x] 问题 #1: [标题] (预计{{EFFORT_1}}小时)
- [x] 问题 #2: [标题] (预计{{EFFORT_2}}小时)

#### P1 问题(High)
- [x] 问题 #3: [标题] (预计{{EFFORT_3}}小时)
- [x] 问题 #4: [标题] (预计{{EFFORT_4}}小时)
- [x] 问题 #5: [标题] (预计{{EFFORT_5}}小时)

**计划修复总数**: {{TOTAL_PLANNED}} 个

### 本次迭代暂缓的问题

#### 暂缓原因分类
- **技术难度高**: 需要更深入的技术调研
- **依赖外部**: 等待第三方库/API更新
- **优先级调整**: 根据业务优先级调整
- **资源限制**: 时间/人力资源不足

#### 暂缓问题清单
- [ ] 问题 #6 (P2) - 原因: {{REASON_6}}
- [ ] 问题 #7 (P2) - 原因: {{REASON_7}}
- [ ] 问题 #8 (P3) - 原因: {{REASON_8}}

**暂缓总数**: {{DEFERRED_COUNT}} 个

---

## Step-by-Step 修复步骤

### 步骤 1: [修复问题 #1]

**问题概述**:
- 标题: {{PROBLEM_1_TITLE}}
- 严重程度: Critical
- 优先级: P0

**修改详情**:
- **文件**: `{{FILE_PATH}}`
- **方法**: `{{METHOD_NAME}}()`
- **行号**: {{LINE_NUMBER_START}}-{{LINE_NUMBER_END}}

**修改内容**:
\```python
# 修改前
{{OLD_CODE}}

# 修改后
{{NEW_CODE}}
\```

**修改说明**:
- 为什么这样修改
- 修改的技术原理
- 预期效果

**验证方法**:
- **测试用例**: `{{TEST_CASE_NAME}}`
- **测试脚本**: `scripts/test_fix_1.py`
- **预期结果**: {{EXPECTED_RESULT}}
- **验证点**:
  - [ ] 验证点1
  - [ ] 验证点2
  - [ ] 验证点3

**风险与缓解**:
- **风险**: {{RISK_DESCRIPTION}}
- **缓解措施**: {{MITIGATION}}

**回滚方案**:
- 如果修复失败,如何回滚
- 回滚命令: `{{ROLLBACK_COMMAND}}`

---

### 步骤 2: [修复问题 #2]

(重复上述结构)

---

(按修复顺序列出所有步骤)

---

## 测试计划

### 测试策略

**测试类型**:
- **单元测试**: 针对单个函数/方法的测试
- **集成测试**: 针对多个模块协作的测试
- **回归测试**: 验证已修复问题无回归
- **性能测试**: 验证性能未退化(如果适用)

**测试原则**:
- ✅ 快速反馈: 单个测试<10秒
- ✅ 独立运行: 测试间无依赖
- ✅ 结果明确: 通过/失败清晰
- ✅ 可重复执行: 结果稳定

### 测试用例

#### 测试用例 1: [验证问题 #1修复]

**基本信息**:
- **测试场景**: {{TEST_SCENARIO}}
- **测试类型**: 单元测试
- **优先级**: P0
- **预计耗时**: <10秒

**测试输入**:
\```python
input_data = {
    "field1": "value1",
    "field2": "value2",
}
\```

**预期输出**:
\```python
expected_output = {
    "result": "success",
    "value": 42,
}
\```

**验证点**:
- [ ] 返回状态码为200
- [ ] 返回值包含预期字段
- [ ] 边界条件处理正确
- [ ] 错误处理符合预期

**测试脚本**: `scripts/test_fix_1.py`

---

#### 测试用例 2: [验证问题 #2修复]

(重复上述结构)

---

(列出所有测试用例)

### 回归测试清单

**已修复问题验证**:
- [ ] 问题 #1: 验证修复效果
- [ ] 问题 #2: 验证修复效果
- [ ] 问题 #3: 验证修复效果

**功能完整性检查**:
- [ ] 核心功能A正常
- [ ] 核心功能B正常
- [ ] 核心功能C正常

**兼容性检查**:
- [ ] 向后兼容性保持
- [ ] API接口未破坏
- [ ] 数据格式未改变

---

## 执行时间表

### 时间安排

| 阶段 | 任务 | 预计时间 | 负责人 | 状态 |
|------|------|----------|--------|------|
| 准备 | 环境搭建、数据准备 | 30分钟 | ... | |
| 开发 | 修复问题#1-#5 | 4小时 | ... | |
| 测试 | 执行测试用例 | 1小时 | ... | |
| 验证 | 回归测试、验收 | 30分钟 | ... | |
| 文档 | 更新文档、CHANGELOG | 30分钟 | ... | |
| **总计** | | **6小时** | | |

### 里程碑

- [ ] **里程碑1**: 环境准备完成 (30分钟)
- [ ] **里程碑2**: 所有问题修复完成 (4.5小时)
- [ ] **里程碑3**: 所有测试通过 (5.5小时)
- [ ] **里程碑4**: 文档更新完成 (6小时)

---

## 验收标准

### 必须满足(MUST)
- [ ] 所有P0问题已修复
- [ ] 所有P1问题已修复
- [ ] 测试用例100%通过
- [ ] 无回归问题
- [ ] 核心功能正常

### 应该满足(SHOULD)
- [ ] 代码审查通过
- [ ] 文档已更新
- [ ] 性能未退化
- [ ] 测试覆盖率≥{{COVERAGE_TARGET}}%

### 可以满足(COULD)
- [ ] 额外的性能优化
- [ ] 额外的测试用例
- [ ] 额外的文档改进

---

## 附录

### 测试数据清单
- `data/input1.json` ({{SIZE_1}} KB)
- `data/input2.json` ({{SIZE_2}} KB)
- `data/test_cases.yaml` ({{SIZE_3}} KB)

### 测试脚本清单
- `scripts/test_fix_1.py` - 测试问题#1修复
- `scripts/test_fix_2.py` - 测试问题#2修复
- `scripts/test_fix_3.py` - 测试问题#3修复
- `scripts/validate_all.py` - 执行所有测试

### 相关文档
- Bug报告: `BUG_REPORT.md`
- 项目README: `../../README.md`
- CHANGELOG: `../../CHANGELOG.md`

### 术语表
- **回归测试**: 验证已修复问题未重新出现
- **测试覆盖率**: 被测试覆盖的代码比例
- **验收标准**: 判断迭代是否成功的标准
